{"version":3,"sources":["../../src/pages/dataService/dataService.module.ts","../../src/pages/dataService/dataService.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { DataService } from './dataService';\n\n@NgModule({\n  declarations: [\n    DataService,\n  ],\n  imports: [\n    IonicPageModule.forChild(DataService),\n    TranslateModule.forChild()\n  ],\n  exports: [\n    DataService\n  ]\n})\nexport class SearchPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/dataService/dataService.module.ts","import {Component, Injectable} from '@angular/core';\nimport {HttpClient} from '@angular/common/http';\nimport {IonicPage, Platform} from 'ionic-angular';\nimport {Geolocation, Geoposition} from '@ionic-native/geolocation';\nimport {LocationAccuracy} from '@ionic-native/location-accuracy';\nimport {Diagnostic} from '@ionic-native/diagnostic';\n\n@IonicPage()\n@Component({\n  selector: 'page-dataService',\n  templateUrl: 'dataService.html',\n  providers: [\n    Geolocation, HttpClient, Platform, Diagnostic, LocationAccuracy\n  ]\n})\n@Injectable()\nexport class DataService {\n\n  constructor(private http: HttpClient,\n              public platform: Platform,\n              public geo: Geolocation,\n              public diagnostic: Diagnostic,\n              public locationAccuracy: LocationAccuracy\n  ) {}\n\n  getUserPosition() {\n    return new Promise(resolve => {\n      const HIGH_ACCURACY = 'high_accuracy';\n      if (this.platform.is('cordova')) {\n        this.platform.ready().then(() => {\n          this.diagnostic.isLocationEnabled().then(enabled => {\n            if (enabled) {\n              if (this.platform.is('android')) {\n                this.diagnostic.getLocationMode().then(locationMode => {\n                  if (locationMode === HIGH_ACCURACY) {\n                    this.geo.getCurrentPosition({timeout: 30000, maximumAge: 0, enableHighAccuracy: true}).then(pos => {\n                      resolve({\n                        coords: {\n                          latitude: pos.coords.latitude,\n                          longitude: pos.coords.longitude\n                        }\n                      });\n                    }).catch(error => resolve(error));\n                  } else {\n                    this.askForHighAccuracy().then(available => {\n                      if (available) {\n                        this.getUserPosition().then(a => resolve(a), e => resolve(e));\n                      }\n                    }, error => resolve(error));\n                  }\n                });\n              } else {\n                this.geo.getCurrentPosition({timeout: 30000, maximumAge: 0, enableHighAccuracy: true}).then(pos => {\n                  resolve({\n                    coords: {\n                      latitude: pos.coords.latitude,\n                      longitude: pos.coords.longitude\n                    }\n                  });\n                }).catch(error => resolve(error));\n              }\n            } else {\n              this.locationAccuracy.request(1).then(result => {\n                if (result) {\n                  this.getUserPosition().then(result => resolve(result), error => resolve(error));\n                }\n              }, error => {\n                resolve(error)\n              });\n            }\n          }, error => {\n            resolve(error)\n          });\n        });\n      } else {\n        resolve('Cordova is not available');\n      }\n    });\n  }\n\n  askForHighAccuracy(): Promise<Geoposition> {\n    return new Promise(resolve => {\n      this.locationAccuracy\n        .request(this.locationAccuracy.REQUEST_PRIORITY_HIGH_ACCURACY).then(() => {\n        this.geo.getCurrentPosition({timeout: 30000}).then(\n          position => {\n            resolve(position);\n          }, error => resolve(error)\n        );\n      }, error => resolve(error));\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/dataService/dataService.ts"],"sourceRoot":""}